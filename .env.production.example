# Production Environment Configuration Template
# Copy this file to .env.production and fill in your production values
# 
# SECURITY WARNING: Never commit actual production secrets to version control

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Connection String (Required)
# Format: postgresql://username:password@host:port/database?options
# Example: postgresql://helperai_user:secure_password@db.example.com:5432/helperai_prod?sslmode=require
DATABASE_URL="postgresql://username:password@host:port/database?sslmode=require"

# Database Connection Pool Settings (Optional)
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=20
DATABASE_POOL_TIMEOUT=5000

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Secret (Required - Generate with: openssl rand -hex 32)
# MUST be at least 32 characters long and unique per environment
JWT_SECRET="your-super-secure-jwt-secret-key-at-least-32-characters-long-and-unique"

# JWT Token Expiration (Optional, default: 7d)
JWT_EXPIRES_IN="7d"

# Column Encryption Secret (Optional - for encrypted database fields)
# Generate with: openssl rand -hex 16
ENCRYPT_COLUMN_SECRET="32-character-hex-string-for-sensitive-data"

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Application URLs (Required)
NEXT_PUBLIC_APP_URL="https://yourdomain.com"
NEXT_PUBLIC_API_URL="https://yourdomain.com/api"

# Node Environment (Required)
NODE_ENV="production"

# Application Version (Optional)
npm_package_version="1.0.0"

# =============================================================================
# AI INTEGRATION (REQUIRED)
# =============================================================================

# OpenAI Configuration
OPENAI_API_KEY="sk-your-production-openai-api-key"
OPENAI_ORG_ID="org-your-openai-organization-id"

# =============================================================================
# EMAIL SERVICE (OPTIONAL)
# =============================================================================

# Resend Email Service
RESEND_API_KEY="re_your-production-resend-api-key"
RESEND_FROM_ADDRESS="noreply@yourdomain.com"

# Alternative: SMTP Configuration
# SMTP_HOST="smtp.yourdomain.com"
# SMTP_PORT="587"
# SMTP_USER="noreply@yourdomain.com"
# SMTP_PASS="your-smtp-password"
# SMTP_SECURE="false"

# =============================================================================
# OAUTH PROVIDERS (OPTIONAL)
# =============================================================================

# Google OAuth
GOOGLE_CLIENT_ID="your-google-oauth-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="your-google-oauth-client-secret"

# =============================================================================
# SLACK INTEGRATION (OPTIONAL)
# =============================================================================

SLACK_CLIENT_ID="your-slack-app-client-id"
SLACK_CLIENT_SECRET="your-slack-app-client-secret"
SLACK_SIGNING_SECRET="your-slack-app-signing-secret"
SLACK_BOT_TOKEN="xoxb-your-slack-bot-token"

# =============================================================================
# GITHUB INTEGRATION (OPTIONAL)
# =============================================================================

GITHUB_APP_SLUG="your-github-app-slug"
GITHUB_APP_ID="123456"
GITHUB_CLIENT_ID="Iv1.your-github-client-id"
GITHUB_CLIENT_SECRET="your-github-client-secret"
GITHUB_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nyour-github-app-private-key\n-----END RSA PRIVATE KEY-----"
GITHUB_WEBHOOK_SECRET="your-github-webhook-secret"

# =============================================================================
# EXTERNAL SERVICES (OPTIONAL)
# =============================================================================

# Jina AI (for embeddings/search)
JINA_API_TOKEN="jina_your-jina-api-token"

# Firecrawl (for web scraping)
FIRECRAWL_API_KEY="fc-your-firecrawl-api-key"

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Sentry Error Tracking
NEXT_PUBLIC_SENTRY_DSN="https://your-sentry-dsn@sentry.io/project-id"
SENTRY_ORG="your-sentry-org"
SENTRY_PROJECT="your-sentry-project"
SENTRY_AUTH_TOKEN="your-sentry-auth-token"

# Vercel Analytics (if deploying to Vercel)
VERCEL_ANALYTICS_ID="prj_your-vercel-analytics-id"

# =============================================================================
# REDIS CONFIGURATION (OPTIONAL - for caching)
# =============================================================================

# Redis URL for caching and sessions
# REDIS_URL="redis://username:password@host:port/db"
# REDIS_TTL=3600

# =============================================================================
# FILE STORAGE CONFIGURATION
# =============================================================================

# File Upload Settings
MAX_FILE_SIZE="10485760"  # 10MB in bytes
ALLOWED_FILE_TYPES="image/jpeg,image/png,image/gif,application/pdf,text/plain"

# File Storage Path (for local filesystem)
FILE_STORAGE_PATH="/var/lib/helperai/files"

# Alternative: S3-compatible storage
# AWS_ACCESS_KEY_ID="your-aws-access-key"
# AWS_SECRET_ACCESS_KEY="your-aws-secret-key"
# AWS_REGION="us-east-1"
# AWS_S3_BUCKET="your-bucket-name"
# AWS_S3_URL="https://your-bucket-name.s3.amazonaws.com"

# =============================================================================
# RATE LIMITING & SECURITY
# =============================================================================

# Rate Limiting (requests per minute)
RATE_LIMIT_AUTH=5
RATE_LIMIT_API=1000
RATE_LIMIT_WIDGET=100
RATE_LIMIT_UPLOAD=10

# CORS Origins (comma-separated)
CORS_ORIGINS="https://yourdomain.com,https://www.yourdomain.com"

# Security Headers
CSP_REPORT_URI="/api/security/csp-report"

# =============================================================================
# DATABASE EXTENSIONS & FEATURES
# =============================================================================

# Enable specific database features
ENABLE_VECTOR_SEARCH="true"
ENABLE_FULL_TEXT_SEARCH="true"
ENABLE_BACKGROUND_JOBS="true"

# =============================================================================
# PERFORMANCE & SCALING
# =============================================================================

# Next.js Configuration
NEXT_PRIVATE_STANDALONE="true"
NEXT_PRIVATE_DEBUG_CACHE="false"

# Memory Limits
NODE_OPTIONS="--max-old-space-size=2048"

# Worker Configuration
WORKER_CONCURRENCY=2
WORKER_TIMEOUT=30000

# =============================================================================
# WEBHOOK CONFIGURATION
# =============================================================================

# Webhook Secrets for External Services
GMAIL_WEBHOOK_SECRET="your-gmail-webhook-verification-secret"
SLACK_WEBHOOK_SECRET="your-slack-webhook-secret"

# =============================================================================
# BACKUP & MAINTENANCE
# =============================================================================

# Database Backup Settings
BACKUP_ENABLED="true"
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# S3 Backup Configuration (optional)
# BACKUP_S3_BUCKET="your-backup-bucket"
# BACKUP_S3_PREFIX="database-backups/"

# =============================================================================
# DEVELOPMENT & DEBUG (PRODUCTION SHOULD BE FALSE)
# =============================================================================

# Debug Settings (KEEP FALSE IN PRODUCTION)
DEBUG="false"
VERBOSE_LOGGING="false"
ENABLE_DEBUG_ROUTES="false"

# Performance Monitoring
ENABLE_PERFORMANCE_METRICS="true"
METRICS_ENDPOINT="/api/metrics"

# =============================================================================
# CUSTOM DOMAIN & CDN
# =============================================================================

# CDN Configuration (optional)
CDN_URL="https://cdn.yourdomain.com"
STATIC_ASSETS_URL="https://assets.yourdomain.com"

# Custom Domain Settings
CUSTOM_DOMAIN="support.yourdomain.com"
WIDGET_DOMAIN="widget.yourdomain.com"

# =============================================================================
# TIMEZONE & LOCALIZATION
# =============================================================================

# Application Timezone
TZ="UTC"
DEFAULT_LOCALE="en"
SUPPORTED_LOCALES="en,es,fr,de"

# =============================================================================
# HEALTH CHECKS & MONITORING
# =============================================================================

# Health Check Configuration
HEALTH_CHECK_ENABLED="true"
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30

# External Health Check URL (for monitoring services)
HEALTH_CHECK_URL="https://yourdomain.com/api/health/basic"

# =============================================================================
# NOTES FOR DEPLOYMENT
# =============================================================================
#
# 1. Generate secure secrets:
#    - JWT_SECRET: openssl rand -hex 32
#    - ENCRYPT_COLUMN_SECRET: openssl rand -hex 16
#
# 2. Required PostgreSQL Extensions:
#    - vector (pgvector) - for AI embeddings
#    - pg_trgm - for text search
#    - pgmq - for message queue (optional)
#    - pg_cron - for scheduled tasks (optional)
#
# 3. Recommended minimum server specs:
#    - 2 GB RAM
#    - 2 CPU cores  
#    - 20 GB SSD storage
#    - SSL certificate
#
# 4. Database providers with required extensions:
#    - Supabase (recommended)
#    - Neon
#    - Railway
#    - AWS RDS (with extensions)
#
# 5. Security checklist:
#    - Enable HTTPS/SSL
#    - Use strong, unique passwords
#    - Restrict database access
#    - Configure firewall rules
#    - Enable monitoring/alerting
#
# =============================================================================